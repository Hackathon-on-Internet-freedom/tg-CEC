# Белый счётчик

Сбор данных о количестве пришедших на митинг, анонимный опрос. Данные собирают
волонтёры у рамок.

Сбор настраивается следующим образом:

- Единственное поле - количество.
- Вопросы не задаются, поэтому при отправке количества прошедших людей оно сразу
  записывается в таблицу. Возможна автоматизация (средствами
  Android-приложений), когда нажатие на аппаратную кнопку отправляет сообщение
  "1" боту.
- Источник данных хэшируется.
- Волонтёры перед тем, как прийти, регистрируют своё местоположение.
- Организатор сбора записывает волонтёров (указав командой `/trust <id>` их идентификаторы).
Если есть ноды с SSB, тогда организатор может заранее записать соответствующие открытые ключи

В результате можно видеть проведение митинга в онлайне. При использовании нод с
SSB возможно передавать данные в локальной сети, между нодами.

# Мониторинг воздуха

Данные о качестве воздуха, открытый опрос. Данные собирают станции слежения,
отправляют, например, каждый час.

Настройка сбора:

- Поля, соответствующие параметрам: количество частиц разного размера, загрязняющим веществам и т.п.
- Вопросы не задаются. Одним сообщением отправляются все данные
- Источник данных открыт - ему можно писать вопросы
- Хозяева станций могут построить сеть доверия друг другу - указав, что считают
  корректными данные тех станций, хозяев которых знают
- Данные может отправлять кто угодно, они будут показаны; можно отфильтровать
  только те источники, которым доверяют

Результатом является сайт мониторинга состояния воздуха по всей России (точнее,
в её городах). Например, в Казани [автоматические
станции](http://www.tatarmeteo.ru/ru/monitoring-okruzhayushhej-sredyi/monitoring-zagryazneniya-atmosfernogo-vozduxa-(s-interaktivnoj-kartoj-zagryazneniya-g.-kazani,-vozmozhno-vyidelit-otdelnyim-punktom).html)
контроля качества воздуха, [введённые к международным
соревнованиями](https://www.idelreal.org/a/30223324.html), были
[отключены](https://inkazan.ru/news/city/04-10-2019/gidromettsentr-perestal-v-avtomaticheskom-rezhime-sledit-za-chistotoy-vozduha-v-kazani).

# Данные о COVID

Необходимые данные для принятия решений, анонимный опрос. Данные собирают врачи
"внизу", в больницах.

## Вариант с суммарной статистикой

- Поля-интересные показатели, например, количество новых COVID-подтверждённых,
  количество внебольничных пневмоний, свободных аппаратов ИВЛ и т.п.
- Поскольку параметров много, их можно сгруппировать и задавать соответствующие
  вопросы, чтобы подсказать, что вводить
- Чтобы не забывать вводить данные, бот может отправлять напоминание раз в
  сутки, например
- После верификации, при помощи сети доверия можно для каждого врача указать,
  что он действительно врач, и его данные официальные.

## Вариант с историями болезни

Этот вариант более полезен для изучения болезни.

- Каждое сообщение - история болезни пациента. Вводятся анонимизированные
  данные, такие как возраст, тяжесть течения болезни, использование ИВЛ и т.д.
- Результирующий массив данных крайне полезен для анализа
- Использование этого варианта сработает только при официальном применении и
  интеграции с другими системами, иначе она требует большого количества
  дополнительных телодвижений (кроме бумажной истории писать ещё и в telegram).

# Демография

Данные о рождённых и умерших, свадьбах и разводах, конфиденциальный опрос.
Данные собирают работники ЗАГСов "внизу" или все желающие (при правильной
организации).

Настройка сбора:

- Поля-необходимые данные: дата рождения, ФИО ребёнка, ФИО родителей; дата
  смерти, ФИО, причина смерти и т.п.
- Источник данных и все чувствительные данные шифруются - организаторы могут их
  прочитать и проверить, но остальным они не видны

Данные позволяют очень быстро оценивать демографию, без ожидания в несколько
месяцев. Можно построить также аналог "Списка памяти врачей", но для всех
погибших во время пандемии (как передовица [New York
Times](https://www.nytimes.com/interactive/2020/05/24/us/us-coronavirus-deaths-100000.html)).
При использовании IPFS данные могут храниться на компьютерах участников до тех
пор, пока это интересно хотя бы одному участнику.

# Показ результатов

Для показа результатов поднимается статический сайт, где указывается, из какого
csv-файла брать данные. Из исходных данных можно выбрать числовые параметры,
группировать и фильтровать их по регионам, показывать в динамике и т.д.

Сайт статический, чтобы его можно было вместе с данными держать бесплатно: на
Github, в IPFS, где угодно; а для использования было бы достаточно доменного
имени.

# Безопасность

## Источники данных

- Открытые опросы сохраняют информацию об id пользователя
- Конфиденциальные опросы сохраняют id в зашифрованном виде. Организаторы могут
  увидеть id, могут раскрыть информацию после окончания опроса. Просматривающие
  не могут отличить один id от другого (поскольку использзуется nonce,
  одинаковые id отображаются в разные шифр-тексты)
- Анонимные опросы сохраняют хэш id. Никто не может восстановить исходный id, не
  зная его. Просматривающие могут отличить один id от другого

## Целостность данных (и SSB)

- Записывается цепочка хэшей данных
- Поэтому добавить данные в середину не получится, можно только удалить
  последние данные - если их ещё не скачали наблюдающие ноды
- Каждая строка подписывается, поэтому злоумышленники без ключей ноды не могут
  добавить никаких данных; никто другой не может изменить историю ноды.

Эти гарантии моделируются в гуглотаблицах с хэшами и подписями "вручную". В
протоколе [SSB](https://scuttlebutt.nz) это реализуется автоматически, по
спецификации.

Чем больше нод будет наблюдать за сбором данных, тем меньше будет возможностей
подмены или изменения данных. Однако, это не блокчейн (нет всеобщего консенсуса
и затрат на его поддержание).

## Хранение данных (IPFS)

- В протоколе IPFS данные хранятся на компьютерах пользователей
- Если пользователь хочет получить какой-то файл, который у него отсутствует, он
  получает его, по сути, используя аналог BitTorrent
- Адресом файла является хэш его содержимого, поэтому данные не получится изменять.
- Данные хранятся в сети, пока есть хотя бы один пользователь, который их хранит
  у себя
  
Чем более интересные данные, тем больше нод может быть заинтересовано хранить их
у себя, и тем сложнее эти данные удалить.
