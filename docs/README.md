# Документация по протоколам и форматам

## Формат итогового массива данных

### raw.csv

Собираемые данные бот дописывает в этот csv-файл, по одной единице информации в строке

В csv-таблице есть поля нескольких разных типов: целые числа, вещественные числа, строки и бинарные данные. Есть (выделенные) столбцы для времени и координат.
Числовые столбцы можно выбирать для показа суммарной статистики на карте, всё остальное - только для показа в таблице.
Для числовых столбцов могут быть указаны разные операции, которые нужно применять для группировки - скажем, сумма или произведение, минимум или максимум (для каждого столбца - своя операция).

Кодировка - utf8. В качестве разделителей полей применяются запятые.

### geo.csv

Файл готовится организаторами сбора и содержит информацию о географии. Каждая
строка - населённый пункт (самый низкий уровень дерева), а в столбцах - название и
координаты следующих уровней:

``` csv
Екатеринбург,56.8274,60.5834, Свердловская область,58.6887,61.3332, УрФО,60.9948,69, Россия,65.6209,98.305
```

При сборе данных (в первой версии) геолокация пользователя используется для
определения населённого пункта, куда его отнести - считается, что пользователь
находится в ближайшем населённом пункте из списка.

[Процесс сбора и его результаты](geo.md)
